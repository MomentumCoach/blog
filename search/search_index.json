{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"S\u00e9rie : Momentum Infra - De 0 \u00e0 Production","text":""},{"location":"#introduction-le-grand-saut","title":"Introduction : Le Grand Saut","text":"<p>Je m'appelle Geoffrey et apr\u00e8s quelques ann\u00e9es d'exp\u00e9rience en tant qu'ing\u00e9nieur devops, j'ai d\u00e9cid\u00e9 de me lancer \u00e0 mon compte avec Arthur, un ami de lyc\u00e9e, pour monter Momentum Coach.</p> <p>Nous sommes une toute petite \u00e9quipe (deux !), sans lev\u00e9e de fonds, et avec des moyens limit\u00e9s. Dans cette s\u00e9rie, je partage comment je mets \u00e0 profit mon exp\u00e9rience pour construire une infrastructure solide mais \u00e9conome. Pas de titres pompeux ici, juste de la tech efficace pour faire tourner notre projet sans br\u00fbler du cash inutilement.</p> <p>L'objectif ? Une infrastructure r\u00e9siliente, scalable, et Low Cost (50\u20ac/mois pour commencer), capable de supporter une application boost\u00e9e \u00e0 l'IA.</p>"},{"location":"#le-plan-de-bataille","title":"Le Plan de Bataille","text":""},{"location":"#partie-1-les-fondations-kubernetes-pour-50","title":"Partie 1 : Les Fondations (Kubernetes pour 50\u20ac)","text":"<p>Article actuel. - Le Hardware : Pourquoi des VPS OVH \"gamme desktop\" \u00e9crasent le Cloud Public. - Le Cluster : K3s en Haute Disponibilit\u00e9 (HA) sans se ruiner. - Networking Basics : WireGuard pour le r\u00e9seau priv\u00e9 (Introduction).</p>"},{"location":"#partie-2-le-networking-cilium-ebpf","title":"Partie 2 : Le Networking (Cilium &amp; eBPF)","text":"<p>\u00c0 venir. - Le Probl\u00e8me : S\u00e9curiser un cluster sur r\u00e9seau public sans VPC. - La Solution : Cilium (eBPF).     - Remplacer Kube-Proxy pour la performance.     - Chiffrement transparent (WireGuard/IPSec).     - Network Policies : Isoler les namespaces (Z\u00e9ro Trust).     - Ingress &amp; Gateway API.</p>"},{"location":"#partie-3-la-data-self-hosted-is-king","title":"Partie 3 : La Data (Self-Hosted is King)","text":"<p>\u00c0 venir. - Le Constat : Les bases de donn\u00e9es manag\u00e9es (RDS, Cloud SQL) sont le poste de d\u00e9pense n\u00b01. - La Solution : Utiliser des Op\u00e9rateurs Kubernetes pour g\u00e9rer le stateful comme des pros.     - PostgreSQL avec CloudNativePG (Backups S3, PITR, HA auto).     - Redis Cluster.     - ClickHouse pour l'analytique.</p>"},{"location":"#partie-4-les-yeux-sur-le-cluster-observabilite","title":"Partie 4 : Les Yeux sur le Cluster (Observabilit\u00e9)","text":"<p>\u00c0 venir. - Le Probl\u00e8me : Datadog est g\u00e9nial, mais co\u00fbte plus cher que mes serveurs. - La Stack :     - La base : L'\u00e9cosyst\u00e8me Prometheus &amp; AlertManager.     - VictoriaMetrics : Une alternative \u00e0 Prometheus plus l\u00e9g\u00e8re, plus performante et stockable \u00e0 long terme (Remote Write).     - VictoriaLogs : Pour arr\u00eater de se battre avec ElasticSearch ou Loki, une solution simple et ultra-rapide pour les logs.     - Grafana : La vitre unique pour visualiser tout \u00e7a.</p>"},{"location":"#partie-5-gitops-deploiement-continu-lusine","title":"Partie 5 : GitOps &amp; D\u00e9ploiement Continu (L'Usine)","text":"<p>\u00c0 venir. - Le Flux : Fini les d\u00e9ploiements manuels. Le code part sur Git, il arrive en prod. - Les Outils :     - ArgoCD : La source de v\u00e9rit\u00e9 de l'infra.     - Skaffold : Un seul outil pour le Dev (Hot Reload) et la Prod.     - GitHub Runners : Pourquoi je n'utilise pas les runners partag\u00e9s de GitHub (Spoiler: Performance &amp; Co\u00fbt).</p>"},{"location":"#partie-6-la-stack-applicative-le-monolithe-distribue","title":"Partie 6 : La Stack Applicative (Le Monolithe Distribu\u00e9)","text":"<p>\u00c0 venir. - La Stack :     - Back : Django (Python) pour la robustesse.     - Front : React &amp; React Native.     - Containerization : Dockerfile optimis\u00e9s multi-stage.</p>"},{"location":"#partie-7-ai-engineering-agents-le-cur-du-reacteur","title":"Partie 7 : AI Engineering &amp; Agents (Le C\u0153ur du R\u00e9acteur)","text":"<p>\u00c0 venir. - L'Intelligence : Momentum Coach n'est pas juste un CRUD, c'est un coach IA. - L'Impl\u00e9mentation :     - MCP (Model Context Protocol) : Cr\u00e9ation d'un serveur MCP pour donner du contexte \u00e0 l'IA sur l'app.     - Agents : Comment le Chatbot peut lire la base de donn\u00e9es et modifier le plan d'entra\u00eenement d'un utilisateur.     - Generation : Pipelines de g\u00e9n\u00e9ration de contenu via llm avec LangGraph.</p>"},{"location":"#partie-8-ai-assisted-workflow-le-developpeur-augmente","title":"Partie 8 : AI-Assisted Workflow (Le D\u00e9veloppeur Augment\u00e9)","text":"<p>\u00c0 venir. - Le M\u00e9tier : Comment je code 3x plus vite seul. - Le Workflow :     - Utilisation des LLMs pour coder (Cursor, Copilot, Antigravity, Claude Code).     - Patterns de \"Code Review\" par IA.     - Comment l'architecture est pens\u00e9e pour \u00eatre \"AI-readable\".</p>"},{"location":"#partie-9-platform-services-les-outils","title":"Partie 9 : Platform Services (Les Outils)","text":"<p>\u00c0 venir. - Services Transverses :     - Langfuse Self-Hosted : Tracing et Debugging des appels LLM (indispensable/co\u00fbteux en SaaS).     - Vault : Gestion des secrets centralis\u00e9e hors du repo Git.     - Cert-manager : Gestion des certificats SSL.</p>"},{"location":"#partie-10-la-science-du-sport-bonus-track","title":"Partie 10 : La Science du Sport (Bonus Track)","text":"<p>\u00c0 venir. - Physiologie : Analyse de la litt\u00e9rature scientifique sur l'entra\u00eenement. - Mod\u00e9lisation : Comment coder la charge d'entra\u00eenement (Banister, TRIMP, etc.). - Algorithmes : Transformer des papiers de recherche en features concr\u00e8tes pour les athl\u00e8tes.</p>"},{"location":"01-cluster-k3s-50-euros/","title":"Cluster K3s \u00e0 50\u20ac","text":"<p>\u2190 Retour \u00e0 l'accueil</p>"},{"location":"01-cluster-k3s-50-euros/#comment-jai-construit-un-cluster-kubernetes-de-production-pour-50mois-vs-900-sur-aws","title":"Comment j'ai construit un Cluster Kubernetes de Production pour 50\u20ac/mois (vs 900\u20ac+ sur AWS)","text":"<p>50,36 \u20ac par mois. C'est le prix exact que je paie pour faire tourner un cluster Kubernetes de 3 n\u0153uds en haute disponibilit\u00e9 avec des performances qui co\u00fbteraient un salaire sur le Cloud public.</p> <p>Si vous avez d\u00e9j\u00e0 regard\u00e9 les prix des solutions manag\u00e9es comme EKS (Amazon), GKE (Google) ou AKS (Azure), vous savez que la facture peut grimper tr\u00e8s vite. On nous vend souvent la facilit\u00e9 du \"Managed Kubernetes\", mais on oublie de mentionner le co\u00fbt d'entr\u00e9e prohibitif pour avoir de la vraie puissance.</p> <p>La bonne nouvelle ? Vous n'avez pas besoin d'une carte de cr\u00e9dit d'entreprise pour avoir une infrastructure \"Production Grade\". Voici comment j'ai fait.</p>"},{"location":"01-cluster-k3s-50-euros/#partie-1-le-materiel-la-bonne-affaire","title":"Partie 1 : Le Mat\u00e9riel (La bonne affaire)","text":"<p>Pour atteindre ce prix, il faut sortir des sentiers battus des grands fournisseurs de Cloud (Hyperscalers). Mon choix s'est port\u00e9 sur 3 VPS chez OVH avec des sp\u00e9cifications qui feraient rougir une instance EC2 standard.</p> <p>La configuration par n\u0153ud (x3) : *   Processeur : 8 vCore *   M\u00e9moire : 24 Go RAM *   Stockage : 200 Go SSD NVMe *   R\u00e9seau : 1.5 Gbit/s illimit\u00e9</p> <p>J'ai donc un cluster totalisant 24 vCores, 72 Go de RAM et 600 Go de NVMe pour 50,36 \u20ac/mois.</p>"},{"location":"01-cluster-k3s-50-euros/#le-logiciel-k3s","title":"Le Logiciel : K3s","text":"<p>Sur ces serveurs, je n'installe pas la distribution Kubernetes standard (qui est lourde), mais K3s.</p>"},{"location":"01-cluster-k3s-50-euros/#pourquoi-k3s-et-pas-le-vrai-kubernetes","title":"Pourquoi K3s et pas \"Le Vrai Kubernetes\" ?","text":"<p>Une id\u00e9e re\u00e7ue tenace est que K3s est une version \"au rabais\" pour l'IoT. C'est faux. K3s est une distribution certifi\u00e9e CNCF, taill\u00e9e pour la production. 1.  Embedded HA (Haute Disponibilit\u00e9) : C'est la killer-feature. K3s int\u00e8gre une gestion automatique de etcd (la base de donn\u00e9es distribu\u00e9e du cluster). Avec 3 n\u0153uds, vous avez un quorum HA imm\u00e9diat et robuste, sans avoir \u00e0 g\u00e9rer des certificats complexes ou des topologies externes. 2.  Ressources : Une distribution K8s \"Upstream\" (type <code>kubeadm</code>) avec tous les plugins cloud peut consommer 2GB+ de RAM juste pour tourner \u00e0 vide. K3s, en retirant les drivers inutiles (AWS, Azure, GCP Storage...), tourne avec &lt;500MB de RAM. Sur des VPS de 24Go, c'est autant de gagn\u00e9 pour vos applis. 3.  Simplicit\u00e9 &amp; Flexibilit\u00e9 : K3s est un binaire unique \"Zero Dependencies\". Par d\u00e9faut, il vient avec Flannel pour le r\u00e9seau, mais ici nous le d\u00e9sactivons (<code>--flannel-backend=none</code>). Pourquoi ? Pour utiliser Cilium et sa puissance eBPF (s\u00e9curit\u00e9, observabilit\u00e9, performance).</p> <pre><code>*Le networking Kubernetes, la s\u00e9curit\u00e9 inter-services et la magie eBPF m\u00e9ritent un espace d\u00e9di\u00e9. Ce sera le sujet exclusif de la **Partie 2** de cette s\u00e9rie. Ici, nous nous concentrons sur l'installation des fondations.*\n</code></pre> <p>Voici \u00e0 quoi ressemble la configuration pour cibler mes serveurs avec Ansible. C'est tout ce dont j'ai besoin pour d\u00e9marrer l'installation :</p> <pre><code># ansible/inventory/hosts.ini\n[k3s_servers]\nvps1 ansible_user=ubuntu public_ip=x.x.x.x wg_ip=10.6.0.1\nvps2 ansible_user=ubuntu public_ip=x.x.x.x wg_ip=10.6.0.2\nvps3 ansible_user=ubuntu public_ip=x.x.x.x wg_ip=10.6.0.3\n</code></pre>"},{"location":"01-cluster-k3s-50-euros/#partie-2-la-touche-expert-ce-nest-pas-un-jouet","title":"Partie 2 : La touche \"Expert\" (Ce n'est pas un jouet)","text":"<p>Ne vous y trompez pas : ce n'est pas un cluster \"bricol\u00e9\" juste pour tester. C'est une infrastructure con\u00e7ue pour la production.</p> <ul> <li>Haute Disponibilit\u00e9 (HA) : Avec 3 n\u0153uds, si un serveur tombe en panne, le cluster continue de fonctionner.</li> <li>GitOps avec ArgoCD : Je ne touche jamais au cluster manuellement avec <code>kubectl apply</code>. Tout est d\u00e9fini en code.</li> <li>S\u00e9curit\u00e9 Avanc\u00e9e : J'utilise Cilium (bas\u00e9 sur eBPF) pour le r\u00e9seau et la s\u00e9curit\u00e9, et Vault pour la gestion des secrets.</li> </ul> <p>La magie du GitOps r\u00e9side dans ce simple fichier. En appliquant ce seul manifeste, ArgoCD se r\u00e9veille et d\u00e9ploie automatiquement toute l'infrastructure :</p> <pre><code># argocd-apps/root-app.yaml\napiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: root\n  namespace: argocd\nspec:\n  source:\n    repoURL: git@github.com:MomentumCoach/momentum-infra.git\n    targetRevision: main\n    path: argocd-apps\n  destination:\n    server: https://kubernetes.default.svc\n    namespace: argocd\n</code></pre>"},{"location":"01-cluster-k3s-50-euros/#partie-3-le-vrai-cout-de-la-liberte-le-comparatif","title":"Partie 3 : Le Vrai Co\u00fbt de la Libert\u00e9 (Le Comparatif)","text":"<p>C'est ici que \u00e7a fait mal pour le Cloud Public. J'ai r\u00e9alis\u00e9 une analyse d\u00e9taill\u00e9e des co\u00fbts pour les m\u00eames ressources (24 vCPU, 72Go+ RAM, 600Go Stockage) chez les principaux fournisseurs.</p> Composant Self-Hosted (OVH VPS) AWS (EKS) Google Cloud (GKE) OVH Public Cloud Compute 3x VPS-3(8 vCPU, 24 Go RAM) 3x t3.2xlarge(8 vCPU, 32 Go RAM) 3x e2-standard-8(8 vCPU, 32 Go RAM) 3x b2-30(8 vCPU, 30 Go RAM) Co\u00fbt Compute ~50,36 \u20ac / mois ~$730 / mois ~$680 / mois ~$683 / mois Control Plane 0 \u20ac (K3s) ~$73 / mois ~$73 / mois 0 \u20ac Stockage Inclus (600 Go NVMe) ~$48 / mois (EBS gp3) ~$60 / mois (SSD) Inclus Bande Passante Illimit\u00e9e (1.5 Gbps) ~$0.09 / Go (NAT Gtw) ~$0.08 / Go Inclus TOTAL MENSUEL ~50 \u20ac ~$850+ ~$810+ ~$680+"},{"location":"01-cluster-k3s-50-euros/#analyse-des-couts","title":"Analyse des Co\u00fbts","text":"<ol> <li> <p>AWS (Amazon Web Services)</p> <ul> <li>L'instance <code>t3.2xlarge</code> est l'\u00e9quivalent le plus proche.</li> <li>Le Control Plane EKS co\u00fbte 0,10\\(/heure, soit environ 73\\)/mois, peu importe la taille du cluster.</li> <li>Le stockage EBS (Elastic Block Store) est factur\u00e9 \u00e0 part. Pour \u00e9galer les 600 Go de NVMe inclus dans mes VPS, il faut ajouter environ 48$.</li> <li>Le pi\u00e8ge : La \"NAT Gateway\" et le trafic sortant. Sur AWS, vous payez pour chaque Go qui sort de votre VPC. Pour un cluster actif, cela ajoute facilement 50$ \u00e0 100$ de plus.</li> </ul> </li> <li> <p>Google Cloud (GCP)</p> <ul> <li>L'instance <code>e2-standard-8</code> offre des performances similaires.</li> <li>GKE facture des frais de gestion de cluster (sauf pour le premier cluster zonal, mais en production on veut souvent du r\u00e9gional).</li> <li>Le stockage Persistent Disk SSD est cher (~0,10$/Go).</li> </ul> </li> <li> <p>OVH Public Cloud</p> <ul> <li>M\u00eame chez OVH, l'offre \"Cloud Public\" (instances <code>b2-30</code>) est 13 fois plus ch\u00e8re que l'offre VPS pour une puissance brute similaire.</li> <li>La diff\u00e9rence ? Le Public Cloud offre une orchestration automatis\u00e9e, des IP flottantes \u00e0 la vol\u00e9e et une scalabilit\u00e9 horizontale infinie. Mais avez-vous besoin de scaler \u00e0 100 n\u0153uds dans l'heure ? Probablement pas.</li> </ul> </li> </ol>"},{"location":"01-cluster-k3s-50-euros/#le-verdict","title":"Le Verdict","text":"<p>Je r\u00e9alise une \u00e9conomie d'environ 800 \u20ac par mois, soit pr\u00e8s de 10 000 \u20ac par an. Pour le prix d'un seul caf\u00e9 par jour, j'ai une puissance de calcul qui co\u00fbterait un SMIC mensuel chez AWS.</p>"},{"location":"01-cluster-k3s-50-euros/#partie-4-les-mains-dans-le-cambouis-les-inconvenients","title":"Partie 4 : Les Mains dans le Cambouis (Les Inconv\u00e9nients)","text":"<p>Tout n'est pas rose au pays de l'auto-h\u00e9bergement. Pour atteindre ce prix plancher, il faut accepter certains compromis que les hyperscalers vous masquent habituellement.</p>"},{"location":"01-cluster-k3s-50-euros/#1-le-dns-round-robin-vs-load-balancer-manage","title":"1. Le DNS Round-Robin vs Load Balancer Manag\u00e9","text":"<p>Pour exposer mes services, j'utilise une entr\u00e9e DNS de type <code>A</code> qui pointe vers les IPs de mes 3 VPS. *   Le probl\u00e8me : Si un n\u0153ud tombe, le DNS (Round Robin) continue d'envoyer 33% du trafic vers ce n\u0153ud mort pendant la dur\u00e9e du cache TTL (souvent 5 \u00e0 60 minutes). Vos utilisateurs tomberont sur une page d'erreur 1 fois sur 3. *   La solution (Mitigation) :     1.  Load Balancer : Placer un petit VPS frontal avec HAProxy/Nginx.     2.  IP Flottante (Failover IP) : Certains h\u00e9bergeurs (comme OVH) permettent d'acheter une IP qui n'est pas attach\u00e9e physiquement \u00e0 un serveur mais que l'on peut basculer d'un serveur \u00e0 l'autre via API. Plut\u00f4t que de bricoler un script, l'id\u00e9al est d'utiliser un Operator Kubernetes (ou un Cloud Controller Manager) qui pilote cela. Si le n\u0153ud ma\u00eetre tombe, l'op\u00e9rateur d\u00e9tecte la panne et appelle l'API de l'h\u00e9bergeur pour r\u00e9assigner l'IP flottante \u00e0 un n\u0153ud sain en quelques secondes. C'est du Failover automatique et natif.</p>"},{"location":"01-cluster-k3s-50-euros/#2-labsence-de-reseau-prive-physique-vrack-virtualization","title":"2. L'absence de R\u00e9seau Priv\u00e9 Physique (vRack) &amp; Virtualization","text":"<p>Contrairement aux offres Bare Metal ou au Cloud Public haut de gamme (AWS VPC), sur des VPS low-cost : *   Pas de Network Isolation : Vos serveurs sont sur un grand r\u00e9seau public partag\u00e9. N'importe qui sur le m\u00eame subnet pourrait th\u00e9oriquement \"sniffer\" votre trafic s'il n'est pas chiffr\u00e9. *   La Virtualisation : Vous partagez le CPU physique avec d'autres clients (\"Noisy Neighbors\"). Si un voisin mine du Bitcoin, vous pouvez sentir un l\u00e9ger ralentissement. *   La Solution (WireGuard) : C'est pour \u00e7a que je n'utilise JAMAIS l'IP publique pour la communication inter-n\u0153uds. J'ai mont\u00e9 une mesh VPN WireGuard transparente. Pour Kubernetes, c'est comme si les serveurs \u00e9taient sur un switch priv\u00e9 \u00e0 la maison, totalement chiffr\u00e9 et isol\u00e9.</p>"},{"location":"01-cluster-k3s-50-euros/#3-la-complexite-du-scaling","title":"3. La Complexit\u00e9 du Scaling","text":"<p>Ajouter un n\u0153ud ici n'est pas juste un curseur \u00e0 glisser dans une interface web GUI. *   La r\u00e9alit\u00e9 : Il faut commander le VPS, attendre la livraison, lancer le playbook Ansible pour le s\u00e9curiser, le joindre au cluster WireGuard, puis l'ajouter au cluster K3s. *   L'att\u00e9nuation : C'est l\u00e0 que l'Infrastructure as Code (IaC) est vitale. Avec Terraform pour provisionner les serveurs et Ansible pour la configuration, j'ai automatis\u00e9 90% du processus \"Day 0\". Mon scaling consiste \u00e0 changer une variable <code>count = 4</code> et lancer une pipeline. Sans \u00e7a, ce serait ing\u00e9rable.</p>"},{"location":"01-cluster-k3s-50-euros/#3-le-stockage-local","title":"3. Le Stockage Local","text":"<p>Mes Pods utilisent le stockage NVMe local des n\u0153uds (HostPath via Local Path Provisioner). *   L'inconv\u00e9nient : Les donn\u00e9es sont \"coll\u00e9es\" au n\u0153ud. Si je perds le n\u0153ud <code>vps1</code>, les pods qui ont besoin de son volume sp\u00e9cifique ne peuvent pas red\u00e9marrer ailleurs. *   La strat\u00e9gie : Pour les applications stateless (Web, API), ce n'est pas grave. Pour la base de donn\u00e9es, c'est critique et cela demande une strat\u00e9gie sp\u00e9cifique (voir ci-dessous).</p>"},{"location":"01-cluster-k3s-50-euros/#4-le-melange-des-genres-master-vs-worker","title":"4. Le M\u00e9lange des Genres (Master vs Worker)","text":"<p>Dans une architecture Kubernetes classique (et co\u00fbteuse), on s\u00e9pare les n\u0153uds du Control Plane (Master) des n\u0153uds qui ex\u00e9cutent les applications (Workers). *   L'approche \u00e9conomique : Ici, chaque n\u0153ud est \u00e0 la fois Master et Worker (Hyper-converg\u00e9). *   Le Gain : On \u00e9conomise la location de 3 serveurs d\u00e9di\u00e9s uniquement \u00e0 la gestion du cluster. Cela repr\u00e9sente souvent 50% de la facture en moins. De plus, on utilise 100% de la RAM disponible pour nos workloads. *   Le Risque : Si une de vos applications consomme toute la RAM ou le CPU (Memory Leak), elle peut \u00e9touffer les processus vitaux de Kubernetes (api-server, etcd) et d\u00e9stabiliser le n\u0153ud entier. *   La Mitigation : Pour dormir tranquille, l'utilisation des Resource Limits (Requests/Limits) et des PriorityClasses est obligatoire. Il faut garantir au niveau du noyau Linux que les composants syst\u00e8me (<code>kube-system</code>) ont toujours la priorit\u00e9 absolue sur vos conteneurs applicatifs.</p>"},{"location":"01-cluster-k3s-50-euros/#partie-5-et-la-data-dans-tout-ca-teasing","title":"Partie 5 : Et la Data dans tout \u00e7a ? (Teasing)","text":"<p>C'est souvent le point bloquant. \"Ne g\u00e9rez jamais votre propre base de donn\u00e9es !\" crient les experts. C'est vrai, sauf si vous avez les bons outils modernes comme CloudNativePG.</p> <p>Comment stocker de la donn\u00e9e critique sur des VPS \u00e0 50\u20ac avec la m\u00eame fiabilit\u00e9 que sur AWS RDS ? Comment g\u00e9rer les backups S3, le Point-in-Time Recovery et le Failover automatique en moins de 10 secondes ?</p> <p>Ce sujet est si vaste et passionnant qu'il m\u00e9rite son propre article. Ce sera justement le sujet de la Partie 2 de cette s\u00e9rie : \"Le Cas de la Base de Donn\u00e9es : Adieu Managed SQL, Bonjour Operators\". Restez connect\u00e9s, \u00e7a va secouer.</p>"},{"location":"01-cluster-k3s-50-euros/#conclusion","title":"Conclusion","text":"<p>L'auto-h\u00e9bergement (Self-hosting) n'est pas seulement une question d'\u00e9conomie. C'est avant tout une question de contr\u00f4le et d'apprentissage. En construisant cette infrastructure, j'ai appris dix fois plus sur le fonctionnement interne de Kubernetes qu'en cliquant sur un bouton \"Cr\u00e9er un cluster\" dans une console AWS.</p> <p>Dans les prochains articles, je vous montrerai comment j'ai s\u00e9curis\u00e9 ce cluster avec Cilium et comment je g\u00e8re mes secrets de mani\u00e8re professionnelle avec Vault. Restez connect\u00e9s !</p>"},{"location":"le-systeme-vdot/","title":"Pourquoi nous avons mis notre \"IA\" en pause (pour revenir aux fondamentaux)","text":"<p>Quand on lance une startup Tech en 2025, la tentation est grande de mettre de l'\"IA\" et du Machine Learning partout. C'est vendeur, c'est \"hype\", et \u00e7a flatte l'ego technique.</p> <p>C'est exactement le pi\u00e8ge dans lequel je suis tomb\u00e9 avec Momentum Coach. Je voulais construire le coach num\u00e9rique le plus avanc\u00e9 du march\u00e9. R\u00e9sultat ? J'ai r\u00e9alis\u00e9 que la complexit\u00e9 n'est pas toujours la r\u00e9ponse. J'ai choisi de b\u00e2tir Momentum Coach sur une base m\u00e9thodologique \u00e9prouv\u00e9e (VDOT), gardant l'IA pour ce qu'elle fait de mieux : l'optimisation \u00e0 la marge.</p> <p>Voici l'histoire technique de ce pivot, et pourquoi la simplicit\u00e9 gagne toujours, m\u00eame face aux algorithmes les plus sophistiqu\u00e9s.</p>"},{"location":"le-systeme-vdot/#1-lapproche-ingenieur-le-filtre-de-kalman","title":"1. L'Approche \"Ing\u00e9nieur\" : Le Filtre de Kalman","text":"<p>Mon id\u00e9e initiale \u00e9tait de traiter la condition physique d'un athl\u00e8te comme un syst\u00e8me dynamique observable.</p> <p>L'ambition \u00e9tait majeure : au lieu de demander \u00e0 l'utilisateur de faire un test initial, je voulais estimer son profil physiologique complet (VO2max, Seuil Ana\u00e9robie) simplement en analysant son historique Strava (les \"Big Data\").</p> <p>En th\u00e9orie du signal, quand on veut estimer l'\u00e9tat cach\u00e9 d'un syst\u00e8me (ici, le niveau physio) \u00e0 partir de mesures imparfaites (les footings du dimanche), l'outil roi est le Filtre de Kalman.</p>"},{"location":"le-systeme-vdot/#la-theorie","title":"La Th\u00e9orie","text":"<p>Le mod\u00e8le se base sur deux \u00e9quations matricielles :</p> <ol> <li> <p>L'\u00c9quation d'\u00c9tat (Prediction) :     $\\(x_{k} = A x_{k-1} + B u_{k} + w_{k}\\)$</p> <ul> <li>\\(x_k\\) : L'\u00e9tat de forme au jour \\(k\\) (Fitness &amp; Fatigue).</li> <li>\\(u_k\\) : La charge d'entra\u00eenement (Training Impulse - TRIMP).</li> <li>\\(A, B\\) : Matrices de transition (comment la forme \u00e9volue naturellement et comment l'entra\u00eenement l'impacte).</li> <li>\\(w_k\\) : Bruit du processus (stress de la vie, maladie...).</li> </ul> </li> <li> <p>L'\u00c9quation de Mesure (Update) :     $\\(z_{k} = H x_{k} + v_{k}\\)$</p> <ul> <li>\\(z_k\\) : La performance observ\u00e9e (ex: allure cardiaque sur un footing).</li> <li>\\(v_k\\) : Bruit de mesure (GPS impr\u00e9cis, d\u00e9rive cardiaque, chaleur...).</li> </ul> </li> </ol>"},{"location":"le-systeme-vdot/#la-promesse-live-continuous-update","title":"La Promesse : \"Live &amp; Continuous Update\"","text":"<p>La grande force th\u00e9orique de ce mod\u00e8le est sa capacit\u00e9 \u00e0 se mettre \u00e0 jour en continu, sans nouveau test maximal. L'algorithme ing\u00e8re chaque sortie :</p> <ul> <li>Si vous courez votre footing habituel \u00e0 10km/h mais avec 5 puls/min de moins que d'habitude...</li> <li>Le filtre d\u00e9tecte une r\u00e9duction de l'erreur entre la pr\u00e9diction et la mesure.</li> <li>Il met \u00e0 jour sa \"Croyance\" : votre endurance fondamentale s'est am\u00e9lior\u00e9e -&gt; votre Seuil a augment\u00e9.</li> </ul> <p>C'\u00e9tait le graal : un plan d'entra\u00eenement qui s'adapte dynamiquement apr\u00e8s chaque s\u00e9ance, m\u00eame une r\u00e9cup\u00e9ration active. \"Automagique\".</p>"},{"location":"le-systeme-vdot/#la-realite-garbage-in-garbage-out","title":"La R\u00e9alit\u00e9 : \"Garbage In, Garbage Out\"","text":"<p>En pratique, c'\u00e9tait un enfer \u00e0 calibrer. Le Filtre de Kalman est optimal si le bruit est gaussien et le mod\u00e8le lin\u00e9aire. Or, la physiologie humaine n'est ni l'un ni l'autre.</p> <ul> <li> <p>Bruit non-gaussien : Le filtre est con\u00e7u pour lisser du bruit statistique \"normal\" (Gaussien). Mais un GPS qui d\u00e9croche ou un bug cardio ne sont pas du bruit, ce sont des aberrations massives (outliers). Le filtre, fonctionnant sur des moyennes pond\u00e9r\u00e9es, se fait \"aspirer\" par ces valeurs extr\u00eames au lieu de les ignorer.</p> </li> <li> <p>Manque d'observabilit\u00e9 : La plupart des amateurs font 80% de leurs sorties en endurance fondamentale \u00e0 basse intensit\u00e9. Avec ces seules donn\u00e9es, il est math\u00e9matiquement tr\u00e8s difficile (voire impossible) de distinguer une am\u00e9lioration du VO2max d'une variation de la fatigue ou de la temp\u00e9rature. Le rapport Signal/Bruit est trop faible sur les footings lents.</p> </li> </ul> <p>J'avais construit une usine \u00e0 gaz qui essayait de deviner la VMA d'un coureur \u00e0 partir de ses footings de r\u00e9cup\u00e9ration. C'\u00e9tait instable et frustrant.</p>"},{"location":"le-systeme-vdot/#2-le-retour-aux-sources-vdot-daniels-gilbert-1979","title":"2. Le Retour aux Sources : VDOT (Daniels &amp; Gilbert, 1979)","text":"<p>Fatigu\u00e9 de debugger mes matrices de covariance, j'ai ouvert un livre de r\u00e9f\u00e9rence : \"Daniel's Running Formula\". Le Dr Jack Daniels (physiologiste, m\u00e9daill\u00e9 olympique) et le math\u00e9maticien Jimmy Gilbert ont publi\u00e9 des travaux fondamentaux qui sont encore aujourd'hui la base de l'entra\u00eenement moderne.</p> <p>Leur approche est aux antipodes du Big Data : Peu de donn\u00e9es, mais de la donn\u00e9e de haute qualit\u00e9.</p>"},{"location":"le-systeme-vdot/#la-mathematique-du-vdot","title":"La Math\u00e9matique du VDOT","text":"<p>Au lieu d'essayer de deviner le niveau, ils le mesurent. Le syst\u00e8me repose sur deux r\u00e9gressions fondamentales :</p> <ol> <li> <p>Le co\u00fbt en oxyg\u00e8ne (\\(VO_2\\)) d'une vitesse donn\u00e9e (\\(v\\)) :</p> \\[VO_2 = 0.182258 \\cdot v + 0.000104 \\cdot v^2 - 4.60\\] <p>Cette formule estime combien d'oxyg\u00e8ne vous consommez pour courir \u00e0 une vitesse \\(v\\) (m/min).</p> </li> <li> <p>Le pourcentage de \\(VO_2max\\) tenable sur une dur\u00e9e (\\(t\\)) :</p> \\[\\%VO\\_2max = 0.8 + 0.1894393 \\cdot e^{-0.012778 \\cdot t} + 0.2989558 \\cdot e^{-0.1932605 \\cdot t}\\] <p>Cette formule d\u00e9crit la chute de la capacit\u00e9 \u00e0 tenir un % de sa puissance max \u00e0 mesure que le temps passe.</p> </li> </ol> <p>En combinant ces deux courbes, on obtient le VDOT. Contrairement au VO2max de laboratoire (qui mesure la taille du \"moteur\"), le VDOT mesure la performance effective. Il encapsule :</p> <ul> <li>Le VO2max (cardio).</li> <li>L'\u00c9conomie de Course (biom\u00e9canique/rendement).</li> <li>Le Seuil Lactique (endurance).</li> </ul> <p>C'est un indice de performance composite. Deux coureurs avec le m\u00eame temps sur 10km ont le m\u00eame VDOT, m\u00eame si l'un a un gros moteur et une mauvaise foul\u00e9e, et l'autre l'inverse. Pour l'entra\u00eenement, c'est ce qui compte : leur vitesse est la m\u00eame.</p>"},{"location":"le-systeme-vdot/#le-pouvoir-et-les-limites-de-lextrapolation","title":"Le Pouvoir (et les Limites) de l'Extrapolation","text":"<p>La beaut\u00e9 du syst\u00e8me Daniels, c'est sa capacit\u00e9 pr\u00e9dictive. Si vous connaissez votre VDOT (via un test court, comme un 1600m), vous pouvez math\u00e9matiquement pr\u00e9dire votre allure sur n'importe quelle distance, du 1500m au Marathon.</p> \\[VDOT_{1500m} \\approx VDOT_{Marathon}\\] <p>Attention cependant : C'est une \u00e9quivalence th\u00e9orique. Un VDOT calcul\u00e9 sur 1600m a tendance \u00e0 \u00eatre optimiste pour un Marathon si l'athl\u00e8te manque d'endurance. C'est l\u00e0 que Momentum Coach intervient. Le VDOT nous donne votre potentiel physiologique. Le but de notre plan d'entra\u00eenement est de construire le volume et la r\u00e9sistance n\u00e9cessaires pour que vous puissiez tenir ce potentiel sur la distance cible.</p>"},{"location":"le-systeme-vdot/#3-lapplication-pratique-le-test-1600m-ou-vos-courses","title":"3. L'Application Pratique : Le Test 1600m (ou vos courses)","text":"<p>Nous avons donc remplac\u00e9 notre filtre de Kalman instable par un protocole simple.</p>"},{"location":"le-systeme-vdot/#pourquoi-1600m","title":"Pourquoi 1600m ?","text":"<p>Nous demandons un test de 1600m car c'est :</p> <ol> <li>Facile \u00e0 caser : \u00c7a prend moins de 15 minutes \u00e9chauffement compris.</li> <li>Facile \u00e0 r\u00e9cup\u00e9rer : Contrairement \u00e0 un 5km ou 10km \u00e0 fond, \u00e7a ne casse pas l'athl\u00e8te pour la semaine.</li> <li>Suffisant : Math\u00e9matiquement, la corr\u00e9lation est d\u00e9j\u00e0 excellente.</li> </ol> <p>Bien s\u00fbr, si vous venez de courir un 10km ou un semi-marathon en comp\u00e9tition (\"\u00e0 fond\"), nous pouvons utiliser ce chronom\u00e8tre directement. C'est m\u00eame encore plus pr\u00e9cis pour les longues distances. Mais pour quelqu'un qui d\u00e9marre un plan, le 1600m est le compromis parfait.</p>"},{"location":"le-systeme-vdot/#etude-de-cas-arthur-marathon-de-barcelone","title":"\u00c9tude de Cas : Arthur (Marathon de Barcelone)","text":"<p>Arthur, mon associ\u00e9, a servi de cobaye.</p> <ul> <li>Test 1600m : R\u00e9alis\u00e9 en 5:50.</li> <li>Calcul VDOT : L'algo sort un VDOT de 51.</li> <li>Pr\u00e9diction Seuil : D'apr\u00e8s les tables, son allure seuil (Threshold Pace) doit \u00eatre 3:50/km.</li> </ul> <p>Trois semaines plus tard, s\u00e9ance cl\u00e9 : 3 x 8 minutes au Seuil. Je lui donne une consigne stricte : \"Ne regarde pas ta montre. Cours \u00e0 la sensation (RPE 7-8/10) et au cardio.\"</p> <p>Je voulais v\u00e9rifier si la pr\u00e9diction math\u00e9matique collait \u00e0 sa physiologie r\u00e9elle du moment. Les donn\u00e9es Strava sont tomb\u00e9es :</p> <ul> <li>Bloc 1 : 3:53/km </li> <li>Bloc 2 : 3:51/km</li> <li>Bloc 3 : 3:50/km</li> </ul> <p>La pr\u00e9cision est incroyable. Arthur s'est cal\u00e9 naturellement sur l'allure cible, en se fiant uniquement \u00e0 ses sensations et \u00e0 sa fr\u00e9quence cardiaque, sans contr\u00f4ler son allure en temps r\u00e9el. Une m\u00e9thode \u00e9prouv\u00e9e, aliment\u00e9e par une seule donn\u00e9e de qualit\u00e9, a vis\u00e9 juste du premier coup.</p>"},{"location":"le-systeme-vdot/#conclusion-une-base-solide-pour-mieux-construire-le-futur","title":"Conclusion : Une base solide pour mieux construire le futur","text":"<p>En tant qu'ing\u00e9nieurs, nous avons tendance \u00e0 sur-complexifier trop t\u00f4t. Ce pivot vers le VDOT ne marque pas la fin de nos ambitions algorithmiques, mais le d\u00e9but d'une approche plus mature.</p> <p>Utiliser le VDOT nous donne une \"V\u00e9rit\u00e9 Terrain\" solide. Demain, quand nous aurons des milliers d'entrainements labellis\u00e9s (o\u00f9 l'on connait l'intensit\u00e9 prescrite vs r\u00e9alis\u00e9e), nous pourrons r\u00e9introduire des filtres de Kalman ou du Machine Learning pour affiner ce mod\u00e8le. Mais cette fois, l'IA ne devra pas deviner dans le vide : elle aura une base solide pour travailler.</p> <p>Pour l'instant, nous parions sur la fiabilit\u00e9.  Un test de 6 minutes vaut mieux que 6 mois de donn\u00e9es mal interpr\u00e9t\u00e9es.</p>"}]}